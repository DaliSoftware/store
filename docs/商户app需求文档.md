#全民皆商之商家app需求文档
#故事：	
在我的老家，农民有很多的农产品都是可以出售的，比如土豆、番薯、花生、花生油、腊肉、剁椒、豆角、辣椒干、豆腐、鱼干、草药等数不尽的农副产品。然而现在的情况这些东西很多都只能拿来喂猪，这不免有点可惜了，因为这些东西在城市里买可都是得花不少钱的。我们的app就可以解决农民伯伯的这一问题 ———— 让所有乡下老百姓都可以把自家的特产摆上网上卖

#受众
app开发人员、后台服务开发人员、测试人员

#文档目的
理清思路，明确需求，使得开发有所依据	

#需求明细

##1. 首页



##2. 注册商户
###目的：
用户通过app可以注册商户，填写必要的信息后即可发布和经营自己的一亩三分地了。注册商户的人，理论上应该是个体农户又或代表村集体的个体人

###业务要求
注册人群的定位：



商户的类型为集体时，将拥有成员表，成员多为本村村民

###数据表格设计：
系统用户表（现有的表）
###界面设计图







##3.店铺信息管理
###作用：
管理店铺信息，刚注册的商户基本上是没有店铺相关的信息的。


商户信息表（商户名称 登入密码 商户类型（个体或集体）  负责人   身份证   性别   联系电话   大头贴   地址坐标    农户形象标签） 
商户的类型为集体时，将拥有成员表，成员多为本村村民










##3.成员管理
###什么是成员
商户的类型为集体时，该商户则可以拥有成员。所谓的成员通常情况下是村集体的个体村民
###成员的作用是什么
通过集体中的成员的作物种植登记信息，从而知道该集体中某作物的生产情况，以及知道该作物可供销售的数量（也就是库存）；成员还可以上传作物的生长和收割情况等等（该功能有待商榷）

###数据表设计
成员（商户id  成员名称（户主名称）  联系电话）
成员种植作物登记表（成员id  作物名称   品种   种植面积   预计产出     实际产出    预计用于出售部分     实际出售数量  登记人）











##4.农产品信息管理

###目的
管理农产品信息，更确切的说是商品信息管理。

###4.1农产品基本信息



###4.2时间轴，
####4.2.1目的
记录农产品从播种到收割的生命历程，属于农产品的成长动态，主要上传即时的照片，内容可以涵盖作物的整个生长周期，比如上传播种的照片；日常管理的照片，包括锄草、施肥、大药等等以及收获时的照片等等。

####4.2.2业务要求及解决方案
#####时间轴必须配图
这点就好像微信朋友圈，没图说个呵呵
#####保存草稿
保存草稿的原因是节省流量，因为毕竟需要上传图片。保存草稿是为了在切换到wifi上网时再将动态发布到网络。如果可以，我们可以使用广播接收者在切换网络的时候自动将草稿发布到网络，如此妙哉
#####图片上传要求
1. 上传的图片必须是通过商户app调用摄像头拍摄的照片才可以，拍摄的照片可以不用立即上传，比如可以回家后到有wifi的情况下再执行上传操作，以节省用户流量。这一要求旨在避免上传一些处理过后的不真实的图片，保护消费者不被处理过的夸张的图片所蒙蔽。
2. 上传的照片的拍摄时间不能早于上传当天30天，这也是避免用户上传过时照片
3. 提供上传图片质量的选项，有普通、高质量、原图三种选项，默认情况下，根据手机所使用的网络来自动选定上传图片的质量
4. //提供是否立即上传和连接wifi后自动上传选项，默认情况下，根据手机所使用的网络来选择是否立即上传，即如果在使用wifi的情况下选择立即上传， 
5. 在一个合适的地方显示上传这些图片需要耗费的流量，具体流量多少根据用户选择的上传图片质量来计算,上传的质量为原图且使用的是非wifi网络时，将需要使用的流量数设置成醒目的红色
#####解决方案：
两种场景，第一，直接通过商户app调用摄像头拍照，这时我们需要指定拍出的照片保存到素材库，拍照成功后，当用户选择确定该新拍出的照片时，向手机的素材库表插入一条与照片对应的记录，具体字段包括：数据包括图片的名称，拍摄时间 图片的hashcode，并将该照片加入到待上传列表中，反之从素材库中删除该拍摄照片（不知道此时素材库是否会保存该照片了）。第二，从素材库中找要上传的照片，即只展示素材库中的照片供用户选择，同时，对于那些拍摄时间超过30天的素材不予显示，或直接不加载它们；根据图片的hashcode值查找该图片是否在素材库表中存在对应的记录，不存在的视之为用户非法加入素材库的图片。确保了展示给用户选择的图片都是合法的后，用户则可以单选或多选需要上传的照片了。
无论是那种选择图片的形式，选中或取消图片后需要重新计算上传图片的大小并予以显示

#####b.保存动态
当用户已经通过拍照或者从素材库中选择要上传的图片，同时也填好了相应的内容（图片说明、上传图片的质量等），就可以点击确定按钮保存这一新的动态了！具体动作有：
保存前，开启进度条，根据用户选择的上传图片的质量压缩或不压缩图片，上传原图时将原图路径加入待上传图片列表，需要压缩时，将压缩生成的图片的保存路径加入到待上传列表。将待上传图片一一上传到服务器。图片上传成功后，在服务器中保存该动态，关闭进度条完成保存







###4.3出售方案
设置商品的出售方案，常见的出售方案有单品出售、计量出售等
表格设计参考：方案类型（单品销售、计量销售）  单位   价格   实际价格   折扣（多少折）









###4.4优惠活动（2期）
设置优惠活动规则
常见规则：
消费金额大于多少有什么奖励（比如满200免50）
购买超过指定单位数量的商品有什么奖励（比如打5折、再比如送什么）





###4.5交易记录
记录和管理商品的交易记录信息，





###4.5评论（2期）





###数据表格设计
农产品信息*（农产品名称*   品种  是否被预定  是否支持网购  预计产量（库存）  上市时间）
时间轴（农产品从播种到收割的剪影），主要上传即时的照片，内容可以涵盖作物的整个生长周期，比如上传播种的照片；日常管理的照片，包括锄草、施肥、大药等等以及收获时的照片等等。
	特殊要求有：1. 确保图片的即时性，不建议用ps后的图片来忽悠顾客 2.一次可以上传多张图片
	（照片id   描述  上传时间）
出售方案，即农产品出售方案
















##统计分析     
##细节：
怎么限定图片的即实现，就是农户或者客户不能用之前的或者ps后的农产品照片来忽悠客户，最大程度的保证农产品的真实性：
方案一：限制用户按规定的程序操作
只有安卓（ios）端可以上传图片，  上传时判断照片拍照时间，超过30秒前的照片不让上传。


土豪可以提前包了农户某一农产品的所有产出

客户出行前设置预先想买的农副产品，系统自动匹配。搜索周边10公里的有满足需求的农户

2016-12-27


##预言：
###村团的出现	
比如一个顾客来到村里买土豆，结果发现整村人都有土豆买，这不利于顾客选购，	
村团的优势，集中管理和出售村里的大众型农作物，所谓的大众型的农作物就是几乎每家每户都生产的作物，比如是土豆、番薯、辣椒之类的，我们应该避免同一村出现过多的出售同一农产品的商户，
然而个体村民可以发布一些特殊的农副产品，比如李四村里只有李四家有养竹鼠，那么他是很适合自己建立商户的。
个体农户成为商户不利于发展，可能出现恶性竞争，也不利于我们的管理，就是一个地方

###农家乐的加入